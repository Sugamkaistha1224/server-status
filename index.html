 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200">

<div class="flex h-screen">
    <!-- Sidebar -->
    <aside class="w-64 bg-blue-600 text-white p-6">
        <h1 class="text-2xl font-bold mb-8"> Sugam Cloud </h1>
        <nav>
            <ul class="space-y-4">
                <li><a href="#" class="flex items-center space-x-2 hover:bg-blue-700 p-2 rounded" onclick="showTab('dashboard')"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a></li>
                <li><a href="#" class="flex items-center space-x-2 hover:bg-blue-700 p-2 rounded" onclick="showTab('emailLogs')"><i class="fas fa-envelope"></i><span>Email Logs</span></a></li>
                <li><a href="#" class="flex items-center space-x-2 hover:bg-blue-700 p-2 rounded" onclick="showTab('domains')"><i class="fas fa-globe"></i><span>Domains</span></a></li>
                <li><a href="#" class="flex items-center space-x-2 hover:bg-blue-700 p-2 rounded" onclick="showTab('integration')"><i class="fas fa-cogs"></i><span>Integration</span></a></li>
                <li><a href="#" class="flex items-center space-x-2 hover:bg-blue-700 p-2 rounded" onclick="showTab('billing')"><i class="fas fa-credit-card"></i><span>Billing</span></a></li>
                <li><a href="#" class="flex items-center space-x-2 hover:bg-blue-700 p-2 rounded" onclick="showTab('settings')"><i class="fas fa-sliders-h"></i><span>Settings</span></a></li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-8 overflow-y-auto">
        <!-- Header -->
        <header class="flex justify-between items-center mb-8">
            <h2 class="text-3xl font-semibold" id="pageTitle">Dashboard</h2>
          <div class="flex items-center space-x-4">
   <div class="relative">
    <input type="search" placeholder="Search..." id="searchInput"
        class="bg-white dark:bg-gray-800 rounded-full py-2 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
        oninput="highlightSearch()">
    <button class="search-btn" type="button" onclick="highlightSearch()">
        <i class='bx bx-search'></i>
    </button>
    <i class="fas fa-search absolute right-3 top-3 text-gray-400"></i>
</div>


<script>
function highlightSearch() {
    const input = document.getElementById("searchInput");
    const term = input.value.trim();
    const content = document.getElementById("textContent");

    // Remove previous highlights
    removeHighlights(content);

    if (term === "") return;

    // Regex for case-insensitive search
    const regex = new RegExp(`(${term})`, 'gi');
    
    // Replace matches with <mark> to highlight
    content.innerHTML = content.textContent.replace(regex, `<mark>$1</mark>`);
}

function removeHighlights(element) {
    // Clear any previous <mark> elements and reset text
    element.innerHTML = element.textContent;
}
</script>





  
<style>
  /* Highlight effect */
mark {
    background-color: yellow;
    color: black;
    padding: 0 4px;
    border-radius: 3px;
}

</style>
<script>
function highlightSearch() {
    // Remove old highlights first
    const oldMarks = document.querySelectorAll('mark');
    oldMarks.forEach(mark => {
        const parent = mark.parentNode;
        parent.replaceChild(document.createTextNode(mark.textContent), mark);
    });
}

function highlightText() {
    const input = document.getElementById("searchInput").value.trim();
    if (input === "") return; // Do nothing if empty

    // Find all text-containing elements
    const elements = document.body.getElementsByTagName('*');
    
    for (let element of elements) {
        if (element.children.length === 0 && element.innerText) {  // Only text-containing elements
            highlightTextInElement(element, input);
        }
    }
}

function highlightTextInElement(element, input) {
    const text = element.innerText;
    const regex = new RegExp(`(${input})`, "gi"); // Case insensitive

    if (regex.test(text)) {
        const newHTML = text.replace(regex, `<mark>$1</mark>`);
        element.innerHTML = newHTML; // Update the element's content with highlighted text
    }
}
</script>

                

                <div class="relative">
                    <img src="https://sugamimage.carrd.co/assets/images/image49.png?v=d0af2455" alt="User Avatar" class="w-10 h-10 rounded-full cursor-pointer" onclick="toggleProfileMenu()">
                    <div id="profileMenu" class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-xl py-2 hidden">
                        <a href="https://sugamkaistha1224.github.io/Edusphere-Official/" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">Edusphere</a>
                        <a href="https://sugamkaistha1224.github.io/Edusphere-Dashboard/" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">Dashboard</a>
                        <a href="https://sugamkaistha1224.github.io/VirtualZone/" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">Virtual Zone</a>
                       
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content">
<!-- Date Filters -->
<div class="mb-4">
    <label for="dateFilter" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Date Filter:</label>
    <select id="dateFilter" class="bg-white dark:bg-gray-800 rounded py-2 px-4" onchange="filterStats(this.value)">
        <option value="today">Today</option>
        <option value="yesterday">Yesterday</option>
        <option value="7days">Last 7 Days</option>
        <option value="month">This Month</option>
        <option value="custom">Custom</option>
    </select>
    <input type="date" id="customStartDate" class="bg-white dark:bg-gray-800 rounded py-2 px-4 mt-2 hidden">
    <input type="date" id="customEndDate" class="bg-white dark:bg-gray-800 rounded py-2 px-4 mt-2 hidden" onchange="filterStats('custom')">
</div>

<!-- Email Input Box (Updated) -->
<div class="mb-6">
    <div class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-4">
        <input 
            type="email" 
            id="emailInput" 
            placeholder="Enter email to load stats..." 
            class="flex-1 bg-gray-100 dark:bg-gray-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800 dark:text-gray-200" 
            oninput="validateEmailInput()"
        />
        <button 
            id="fetchButton"
            onclick="fetchEmailStats()" 
            class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-6 rounded flex items-center justify-center space-x-2 disabled:opacity-50"
            disabled
        >
            <i class="fas fa-sync-alt"></i> 
            <span>Fetch</span>
        </button>
    </div>
    <p id="emailFetchStatus" class="text-xs text-gray-500 mt-2"></p>
</div>

<script>
    function validateEmailInput() {
        const emailInput = document.getElementById("emailInput").value.trim();
        const fetchButton = document.getElementById("fetchButton");
        const emailFetchStatus = document.getElementById("emailFetchStatus");
        
        // Regex to validate @gmail.com email
        const isValidEmail = /^[a-zA-Z0-9._%+-]+@gmail\.com$/;

        if (isValidEmail.test(emailInput)) {
            // Enable the fetch button if email is valid
            fetchButton.disabled = false;
            emailFetchStatus.textContent = ""; // Clear status message
        } else {
            // Disable the fetch button if email is invalid
            fetchButton.disabled = true;
            emailFetchStatus.textContent = "Please enter a valid Gmail address.";
        }
    }

    function fetchEmailStats() {
        const emailInput = document.getElementById("emailInput").value.trim();
        const emailFetchStatus = document.getElementById("emailFetchStatus");

        if (!emailInput) {
            return; // Exit if no email is entered
        }

        // Update the status to indicate fetching
        emailFetchStatus.textContent = "Fetching email stats...";

        // Simulate fetching stats (replace this with your actual fetch call)
        setTimeout(() => {
            // Example response handling (replace with your own logic)
            const response = {
                totalEmailsSent: 1000,
                deliveryRate: "98%",
                failedEmails: 25,
                bouncedEmails: 10
            };

            // Update the status message with fetched data
            emailFetchStatus.textContent = `Stats for ${emailInput}: 
            Total Emails Sent: ${response.totalEmailsSent},
            Delivery Rate: ${response.deliveryRate},
            Failed Emails: ${response.failedEmails},
            Bounced Emails: ${response.bouncedEmails}`;
        }, 2000); // Simulate a 2-second delay
    }
</script>


<!-- Stats Grid 
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold mb-2">Total Emails Sent</h3>
        <p id="totalEmailsSent" class="text-2xl font-bold text-blue-600">0</p>
        <p class="text-sm">+0% from previous period</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold mb-2">Delivery Rate</h3>
        <p id="deliveryRate" class="text-2xl font-bold text-green-600">0%</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold mb-2">Failed Emails</h3>
        <p id="failedEmails" class="text-2xl font-bold text-red-600">0</p>
        <p class="text-sm">+0% from previous period</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold mb-2">Bounced Emails</h3>
        <p id="bouncedEmails" class="text-2xl font-bold text-red-600">0</p>
        <p class="text-sm">-0% from previous period</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold mb-2">Opened Emails</h3>
        <p id="openedEmails" class="text-2xl font-bold text-yellow-600">0</p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold mb-2">Clicked Emails</h3>
        <p id="clickedEmails" class="text-2xl font-bold text-blue-600">0</p>
    </div>
</div>
-->

<script>
function fetchEmailStats() {
    const email = document.getElementById('emailInput').value.trim();
    const status = document.getElementById('emailFetchStatus');

    if (!email) {
        status.textContent = "⚠️ Please enter a valid email first.";
        return;
    }

    status.textContent = "Fetching live data for " + email + "...";

    setTimeout(() => {
        // Random simulated data
        const totalEmailsSent = Math.floor(Math.random() * 10000) + 1;
        const deliveryRate = (Math.random() * (99 - 80) + 80).toFixed(2); // between 80% - 99%
        const failedEmails = Math.floor(Math.random() * 500);
        const bouncedEmails = Math.floor(Math.random() * 300);
        const openedEmails = Math.floor(Math.random() * totalEmailsSent * 0.7);
        const clickedEmails = Math.floor(Math.random() * openedEmails * 0.5);

        animateCount('totalEmailsSent', 0, totalEmailsSent, 1000);
        animateCount('deliveryRate', 0, deliveryRate, 1000, '%');
        animateCount('failedEmails', 0, failedEmails, 1000);
        animateCount('bouncedEmails', 0, bouncedEmails, 1000);
        animateCount('openedEmails', 0, openedEmails, 1000);
        animateCount('clickedEmails', 0, clickedEmails, 1000);

        status.textContent = "✅ Live data updated for " + email;
    }, 1000);
}

function animateCount(id, start, end, duration, suffix = '') {
    const element = document.getElementById(id);
    let startTime = null;

    function animation(currentTime) {
        if (!startTime) startTime = currentTime;
        const progress = currentTime - startTime;
        const value = Math.min(Math.floor((progress / duration) * (end - start) + start), end);
        element.textContent = suffix ? value + suffix : value.toLocaleString();
        if (value < end) {
            requestAnimationFrame(animation);
        }
    }

    requestAnimationFrame(animation);
}
</script>
<!-- Replace charts with iframe -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 col-span-2">
        <h3 class="text-lg font-semibold mb-4">Live Server Status of Edusphere Environments</h3>
        <iframe src="https://sugamkaistha1224.github.io/live-status-server/" 
            class="w-full h-[500px] rounded-lg border-2 border-blue-400" 
            frameborder="0" 
            loading="lazy">
        </iframe>
    </div>
</div>

<!-- Add this script at the bottom before </body> -->
<script>
function updateLiveData() {
    const now = new Date();
    const timeString = now.toLocaleTimeString();

    // Simulate a random live count for demo
    const liveCount = Math.floor(Math.random() * 1000) + 100; // 100-1100

    document.getElementById('liveCount').textContent = liveCount + " Users Online";
    document.getElementById('liveTime').textContent = "Updated at: " + timeString;
}

// Update every 5 seconds
setInterval(updateLiveData, 5000);

// Initial call
updateLiveData();
</script>

            </div>
       <!-- FontAwesome (optional icons) -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<script>
  // ---------------- EMAIL LOG SECTION ----------------
  function validateEmailInput() {
    const emailInput = document.getElementById("emailInput").value.trim();
    const fetchButton = document.getElementById("fetchButton");
    const emailFetchStatus = document.getElementById("emailFetchStatus");

    const isValidEmail = /^[a-zA-Z0-9._%+-]+@gmail\.com$/;
    if (isValidEmail.test(emailInput)) {
      fetchButton.disabled = false;
      emailFetchStatus.textContent = "";
    } else {
      fetchButton.disabled = true;
      emailFetchStatus.textContent = "Please enter a valid Gmail address.";
    }
  }

  function fetchEmailStats() {
    const emailInputValue = document.getElementById("emailInput").value.trim();
    const emailFetchStatus = document.getElementById("emailFetchStatus");

    if (!emailInputValue) return;

    emailFetchStatus.textContent = "Fetching email stats...";

    setTimeout(() => {
      const isSuccess = Math.random() > 0.3;
      const status = isSuccess ? "Verified / Complete" : "Pending";

      emailFetchStatus.textContent = isSuccess
        ? `Fetch successful for ${emailInputValue}`
        : `Fetch failed or incomplete for ${emailInputValue}`;

      const log = {
        email: emailInputValue,
        time: new Date().toISOString(),
        subject: "Stats Fetch",
        status: status
      };

      const emailLogs = JSON.parse(localStorage.getItem("emailLogs")) || [];
      emailLogs.push(log);
      localStorage.setItem("emailLogs", JSON.stringify(emailLogs));
      appendEmailLogToTable(log);
    }, 2000);
  }

  function appendEmailLogToTable(log) {
    const table = document.getElementById('emailLogsTable');
    const row = document.createElement('tr');
    row.classList.add('border-b', 'dark:border-gray-700');

    const logDate = new Date(log.time);
    const formattedDate = logDate.getFullYear() + '-' +
      String(logDate.getMonth() + 1).padStart(2, '0') + '-' +
      String(logDate.getDate()).padStart(2, '0') + ' ' +
      String(logDate.getHours()).padStart(2, '0') + ':' +
      String(logDate.getMinutes()).padStart(2, '0');

    const statusClass = log.status === "Verified / Complete"
      ? "bg-green-200 text-green-800"
      : "bg-yellow-200 text-yellow-800";

    row.innerHTML = `
      <td class="py-2">${formattedDate}</td>
      <td class="py-2">${log.email}</td>
      <td class="py-2">${log.subject}</td>
      <td class="py-2">
        <span class="${statusClass} py-1 px-2 rounded-full text-sm">${log.status}</span>
      </td>
    `;
    table.appendChild(row);
  }

  window.addEventListener('DOMContentLoaded', () => {
    const googleEmail = localStorage.getItem('googleUserEmail');
    const emailLogs = JSON.parse(localStorage.getItem("emailLogs")) || [];

    // Show Gmail on top
    const emailLogDiv = document.getElementById('emailLog');
    if (googleEmail && emailLogDiv) {
      emailLogDiv.innerHTML = `<strong>Signed in with:</strong> ${googleEmail}`;
    }

    // Add Google login to log table if not already logged
    if (googleEmail) {
      const alreadyLogged = emailLogs.some(entry =>
        entry.email === googleEmail && entry.subject === "Google Sign-In"
      );

      if (!alreadyLogged) {
        const log = {
          email: googleEmail,
          time: new Date().toISOString(),
          subject: "Google Sign-In",
          status: "Verified / Complete"
        };
        emailLogs.push(log);
        localStorage.setItem("emailLogs", JSON.stringify(emailLogs));
        appendEmailLogToTable(log);
      }
    }

    // Show all logs
    emailLogs.forEach(appendEmailLogToTable);
  });

</script>

<!-- Email Status -->
<div>
  <p id="emailFetchStatus" class="text-xs text-gray-500 mt-2"></p>
</div>

<hr class="my-6">

<!-- Email Logs Section -->
<div id="emailLogs" class="tab-content">
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
    <!-- Display Signed-in Email -->
<div id="emailLog" class="p-4 text-sm text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded mb-4">

    <table class="w-full">
      <thead>
        <tr class="border-b dark:border-gray-700">
          <th class="text-left py-2">Date</th>
          <th class="text-left py-2">Recipient</th>
          <th class="text-left py-2">Subject</th>
          <th class="text-left py-2">Status</th>
        </tr>
      </thead>
      <tbody id="emailLogsTable">
        <!-- Logs dynamically inserted here -->
      </tbody>
    </table>
  </div>
</div>
</div>
<!-- Domains Tab (Unchanged) -->
<div id="domains" class="tab-content hidden">
  <div class="flex justify-between mb-6">
    <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded" onclick="showDomainModal()">Add Domain</button>
  </div>

  <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
    <table class="w-full">
      <thead>
        <tr class="border-b dark:border-gray-700">
          <th class="text-left py-2">Domain</th>
          <th class="text-left py-2">Status</th>
          <th class="text-left py-2">Action</th>
        </tr>
      </thead>
      <tbody id="domainTableBody">
        <!-- Dynamic rows will be added here -->
      </tbody>
    </table>
  </div>
</div>


<!-- Domain Modal -->
<div id="domainModal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center">
    <div class="bg-white p-6 rounded-lg shadow-lg w-1/3">
        <h2 class="text-xl font-semibold mb-4">Add Domain</h2>
        <input type="url" id="domainInput" class="w-full p-2 mb-4 border rounded" placeholder="Enter domain URL">
        <button onclick="addDomain()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Add Domain</button>
        <button onclick="closeDomainModal()" class="bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded mt-4">Cancel</button>
    </div>
</div>

<script>
  // ---------------- DOMAIN SECTION ----------------

  function showDomainModal() {
    document.getElementById("domainModal").classList.remove("hidden");
  }

  function closeDomainModal() {
    document.getElementById("domainModal").classList.add("hidden");
  }

  function addDomain() {
    const domainInput = document.getElementById("domainInput").value.trim();
    if (!domainInput) {
      alert("Please enter a valid domain.");
      return;
    }

    const tableBody = document.getElementById("domainTableBody");
    const newRow = document.createElement("tr");

    newRow.innerHTML = `
      <td class="py-2">${domainInput}</td>
      <td class="py-2"><span class="bg-green-200 text-green-800 py-1 px-2 rounded-full text-sm">Verified</span></td>
      <td class="py-2"><a href="#" class="text-blue-600 hover:underline">View Details</a></td>
    `;
    tableBody.appendChild(newRow);
    saveDomainToLocalStorage(domainInput);
    closeDomainModal();
  }

  function saveDomainToLocalStorage(domain) {
    const domains = JSON.parse(localStorage.getItem("domains")) || [];
    domains.push(domain);
    localStorage.setItem("domains", JSON.stringify(domains));
  }

  function loadDomains() {
    const storedDomains = JSON.parse(localStorage.getItem("domains")) || [];
    const tableBody = document.getElementById("domainTableBody");

    storedDomains.forEach(domain => {
      const newRow = document.createElement("tr");
      newRow.innerHTML = `
        <td class="py-2">${domain}</td>
        <td class="py-2"><span class="bg-green-200 text-green-800 py-1 px-2 rounded-full text-sm">Verified</span></td>
        <td class="py-2"><a href="#" class="text-blue-600 hover:underline">View Details</a></td>
      `;
      tableBody.appendChild(newRow);
    });
  }

  // ---------------- COMBINED ONLOAD ----------------
  window.onload = function () {
    // Load both logs on page load
    const emailLogs = JSON.parse(localStorage.getItem("emailLogs")) || [];
    emailLogs.forEach(log => appendEmailLogToTable(log));

    loadDomains();
  };

</script>



        <!-- Integration Tab -->
     <!-- Integration Tab -->
<div id="integration" class="tab-content hidden">
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">

    <!-- Tab Switcher -->
    <div class="tabs">
      <button class="tab-button active" onclick="showIntegrationTab('smtpCredentials')">SMTP Credentials of Edusphere.env</button>
      <button class="tab-button" onclick="showIntegrationTab('apiDoc')">API Documentation</button>
    </div>

    <!-- SMTP Credentials Tab -->
    <div id="smtpCredentials" class="integration-tab-content show">
      <h3 class="text-xl font-semibold mb-4">SMTP Credentials</h3>
      <div class="grid grid-cols-2 gap-4">

        <div>
          <p class="font-semibold">Host:</p>
          <p>w3schools.w3spaces.com</p>
          <p>github.page.com</p>
        </div>
        <div>
          <p class="font-semibold">Port:</p>
          <p>587</p>
        </div>
        <div>
          <p class="font-semibold">Username:</p>
          <p>your_username</p>
        </div>
        <div>
          <p class="font-semibold">Password:</p>
          <p>••••••••••••</p>
        </div>

        <input type="text" id="smtpHost" placeholder="SMTP Host" class="border p-2 rounded mt-1" />
        <input type="text" id="smtpPort" placeholder="Port" class="border p-2 rounded mt-1" />
        <input type="text" id="smtpUser" placeholder="Username" class="border p-2 rounded mt-1" />
        <input type="password" id="smtpPass" placeholder="Password" class="border p-2 rounded mt-1" />

        <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mt-2" onclick="regeneratePassword()">Regenerate Password</button>
        <button onclick="saveSMTP()" class="mt-2 bg-green-500 text-white px-4 py-2 rounded">Save SMTP</button>
        <button onclick="testSMTPConnection()" class="mt-2 bg-blue-600 text-white px-4 py-2 rounded">Test Connection</button>

        <a href="assets/sample-postman.json" download class="text-blue-500 hover:underline mt-4 inline-block">Download Postman Collection</a>
      </div>
    </div>

    <!-- API Documentation Tab -->
    <div id="apiDoc" class="integration-tab-content hidden">
      <h3 class="text-xl font-semibold mb-4">API Documentation</h3>
      <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mt-2" onclick="regenerateApiKey()">Generate New API Key</button>

      <div class="flex items-center space-x-2 mt-4">
        <p id="apiKeyText">sk_live_abcdefghijklmnopqrstuvwxyz123456</p>
        <button onclick="copyToClipboard('apiKeyText')" class="text-blue-500 hover:underline">Copy</button>
      </div>

      <h4 class="text-lg mt-6">API Usage</h4>
      <div class="tabs">
        <button class="tab-button active" onclick="showApiExample('curl')">CURL</button>
        <button class="tab-button" onclick="showApiExample('python')">Python</button>
        <button class="tab-button" onclick="showApiExample('nodejs')">Node.js</button>
      </div>

      <div id="curl" class="api-example show">
        <pre><code>// Example usage with CURL
curl -X POST https://api.smtpserver.com/send \
     -H "Authorization: Bearer YOUR_API_KEY" \
     -H "Content-Type: application/json" \
     -d '{
          "to": "user@example.com",
          "subject": "Hello World",
          "text": "This is a test email"
         }'</code></pre>
      </div>

      <div id="python" class="api-example hidden">
        <pre><code>// Example usage with Python
import requests

url = "https://api.smtpserver.com/send"
payload = {
    "to": "user@example.com",
    "subject": "Hello World",
    "text": "This is a test email"
}
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}
response = requests.post(url, json=payload, headers=headers)
print(response.json())</code></pre>
      </div>

      <div id="nodejs" class="api-example hidden">
        <pre><code>// Example usage with Node.js
const axios = require('axios');

const data = {
    to: 'user@example.com',
    subject: 'Hello World',
    text: 'This is a test email'
};

axios.post('https://api.smtpserver.com/send', data, {
    headers: {
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
    }
})
.then(response => {
    console.log(response.data);
})
.catch(error => {
    console.error(error);
});</code></pre>
      </div>
    </div>
  </div>
</div>

<script>
function saveSMTP() {
  const smtp = {
    host: document.getElementById('smtpHost').value,
    port: document.getElementById('smtpPort').value,
    user: document.getElementById('smtpUser').value,
    pass: document.getElementById('smtpPass').value
  };
  localStorage.setItem("smtpSettings", JSON.stringify(smtp));
  alert("SMTP settings saved!");
}

window.addEventListener('load', () => {
  const smtp = JSON.parse(localStorage.getItem("smtpSettings"));
  if (smtp) {
    document.getElementById('smtpHost').value = smtp.host;
    document.getElementById('smtpPort').value = smtp.port;
    document.getElementById('smtpUser').value = smtp.user;
    document.getElementById('smtpPass').value = smtp.pass;
  }
  checkApiKeyExpiry();
});

function testSMTPConnection() {
  const smtp = JSON.parse(localStorage.getItem("smtpSettings"));
  if (!smtp) return alert("Please save SMTP settings first.");
  fetch('/api/test-smtp', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(smtp)
})
.then(res => res.json())
.then(data => {
  if (data.success) {
    alert("SMTP connection successful!");
  } else {
    alert("SMTP connection failed: " + data.message);
  }
})
.catch(err => {
  alert("Error testing SMTP connection: " + err.message);
});


}

function regeneratePassword() {
  const newPassword = Math.random().toString(36).slice(-10);
  alert("New password generated: " + newPassword);
}

function regenerateApiKey() {
  const newApiKey = 'sk_live_' + Math.random().toString(36).substring(2, 20);
  const keyData = {
    key: newApiKey,
    createdAt: new Date().toISOString()
  };
  localStorage.setItem('apiKeyData', JSON.stringify(keyData));
  document.getElementById('apiKeyText').textContent = newApiKey;
  alert("New API key generated!");
}

function copyToClipboard(elementId) {
  const text = document.getElementById(elementId).textContent;
  navigator.clipboard.writeText(text)
    .then(() => alert("Copied to clipboard!"))
    .catch(() => alert("Failed to copy."));
}

function checkApiKeyExpiry() {
  const data = JSON.parse(localStorage.getItem('apiKeyData'));
  if (!data) return;
  const created = new Date(data.createdAt);
  const now = new Date();
  const ageInDays = Math.floor((now - created) / (1000 * 60 * 60 * 24));
  if (ageInDays > 30) {
    alert("Your API key is over 30 days old. Consider regenerating.");
  }
}

function showIntegrationTab(tabId) {
  document.querySelectorAll('.integration-tab-content').forEach(tab => {
    tab.classList.add('hidden');
  });
  document.getElementById(tabId).classList.remove('hidden');
  document.querySelectorAll('.tabs .tab-button').forEach(btn => {
    btn.classList.remove('active');
  });
  event.target.classList.add('active');
}

function showApiExample(exampleId) {
  document.querySelectorAll('.api-example').forEach(tab => {
    tab.classList.add('hidden');
  });
  document.getElementById(exampleId).classList.remove('hidden');
  document.querySelectorAll('#apiDoc .tabs .tab-button').forEach(btn => {
    btn.classList.remove('active');
  });
  event.target.classList.add('active');
}
</script>

<script type="text/javascript">
    const express = require('express');
const nodemailer = require('nodemailer');
const router = express.Router();

router.post('/api/test-smtp', async (req, res) => {
  const { host, port, user, pass } = req.body;

  let transporter = nodemailer.createTransport({
    host,
    port: parseInt(port),
    secure: port === '465', // true for 465, false for others
    auth: {
      user,
      pass
    }
  });

  try {
    await transporter.verify();
    res.json({ success: true });
  } catch (error) {
    res.json({ success: false, message: error.message });
  }
});

module.exports = router;

</script>
        <!-- Billing Tab -->
        <div id="billing" class="tab-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                <h3 class="text-xl font-semibold mb-4">Billing</h3>
                <p class="mb-4">Current Plan: <strong>Starter Plan</strong></p>
                
                <button class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded" onclick="alert('Upgrade feature coming soon')">Upgrade Plan</button>
            </div>
        </div>

        <!-- Settings Tab -->
    <div id="settings" class="tab-content hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h3 class="text-xl font-semibold mb-4">Account Settings</h3>
        <form id="settingsForm" class="space-y-4" onsubmit="submitForm(event)">
            <div>
                <label for="fullName" class="block mb-1">Full Name</label>
                <input type="text" id="fullName" name="fullName" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600">
            </div>
            <div>
                <label for="email" class="block mb-1">Email Address</label>
                <input type="email" id="email" name="email" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600">
            </div>
            <div>
                <label for="password" class="block mb-1">New Password</label>
                <input type="password" id="password" name="password" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600">
            </div>
            <div>
                <label for="confirmPassword" class="block mb-1">Confirm New Password</label>
                <input type="password" id="confirmPassword" name="confirmPassword" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600">
            </div>
            <button type="submit" id="submitButton" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded" onclick="disableButton()">Save Changes</button>

        </form>
        <p id="formStatus" class="text-xs text-gray-500 mt-2"></p>
    </div>
</div>

<script>
    function disableButton() {
  document.getElementById("submitButton").disabled = true;
}

function submitForm(event) {
    event.preventDefault(); // Prevent form submission

    // Get form values
    const fullName = document.getElementById("fullName").value;
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirmPassword").value;

    // Validate password match
    if (password !== confirmPassword) {
        alert("Passwords do not match!");
        return;
    }

    // Prepare data to send to Google Sheets
    const formData = {
        fullName: fullName,
        email: email,
        password: password
    };

    // Google Apps Script Web App URL (replace with your URL)
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzK7QI45EzPG7gglJ_vM1a35Dp7TDCWGy686-i8xV75fg3_BvrYZdsAFa6u1mhd9ZB7mg/exec';

    // Debugging: Log the data being sent
    console.log('Sending data:', formData);

    // Send data to Apps Script via fetch
    fetch(scriptURL, {
        method: 'POST', 
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData) // Convert the data into JSON
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json(); // Parse JSON response
    })
    .then(data => {
        console.log('Response from server:', data); // Debugging: log server response
        if (data.result === 'success') {
            document.getElementById("formStatus").textContent = `Data saved successfully in row ${data.row}`;
        } else {
            document.getElementById("formStatus").textContent = `Error: ${data.error}`;
        }
    })
    .catch(error => {
        console.error('Fetch error:', error); // Log error details
        document.getElementById("formStatus").textContent = `Error: ${error.message}`;
    });
}

</script>
    </main>
</div>

<!-- Modals -->
<div id="domainModal" class="hidden fixed z-10 inset-0 overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
            <!-- Add Domain Modal -->
            <h3 class="text-xl font-semibold mb-4">Add Domain</h3>
            <form id="addDomainForm" class="space-y-4">
                <div>
                    <label for="domainName" class="block mb-1">Domain Name</label>
                    <input type="text" id="domainName" name="domainName" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600">
                </div>
                <button type="button" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded" onclick="simulateAddDomain()">Add Domain</button>
                <button type="button" class="ml-2 text-gray-700 dark:text-gray-300" onclick="closeDomainModal()">Cancel</button>
            </form>
            <div id="dnsRecords" class="hidden mt-8">
                <h3>Add the following DNS records to your domain:</h3>
                <ul class="list-disc pl-5">
                    <li>TXT Record: <span id="domainTxtRecord">TXT_RECORD_EXAMPLE</span></li>
                    <li>DKIM Record: <span id="domainDkimRecord">DKIM_RECORD_EXAMPLE</span></li>
                    <li>MX Record: <span id="domainMxRecord">MX_RECORD_EXAMPLE</span></li>
                </ul>
                <p class="mt-4">After adding the DNS records, please wait up to 48 hours for the changes to propagate and then click the "Verify" button below.</p>
                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mt-4" onclick="verifyDomain()">Verify</button>
                <p id="verificationMessage" class="mt-4"></p>
            </div>
        </div>
    </div>
</div>

<div id="emailSenderModal" class="hidden fixed z-10 inset-0 overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
            <!-- Add Email Sender Modal -->
            <h3 class="text-xl font-semibold mb-4">Add Email Sender</h3>
            <form id="addEmailSenderForm" class="space-y-4">
                <div>
                    <label for="emailSender" class="block mb-1">Email Address</label>
                    <input type="email" id="emailSender" name="emailSender" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600">
                </div>
                <button type="button" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded" onclick="simulateAddEmailSender()">Add Email Sender</button>
                <button type="button" class="ml-2 text-gray-700 dark:text-gray-300" onclick="closeEmailSenderModal()">Cancel</button>
            </form>
            <div id="emailVerification" class="hidden mt-8">
                <p>Please check your inbox for the verification email and click the link to verify.</p>
                <p id="emailVerificationMessage" class="mt-4"></p>
            </div>
        </div>
    </div>
</div>

<script>
    // Function to show/hide tabs
    function showTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
        document.getElementById(tabId).classList.remove('hidden');
        document.getElementById('pageTitle').textContent = tabId.charAt(0).toUpperCase() + tabId.slice(1);
    }

    // Function to toggle dark mode
    function toggleDarkMode() {
        document.body.classList.toggle('dark');
        localStorage.setItem('darkMode', document.body.classList.contains('dark'));
    }

    // Function to toggle profile menu
    function toggleProfileMenu() {
        const menu = document.getElementById('profileMenu');
        menu.classList.toggle('hidden');
    }

    // Function to filter stats by different time ranges
    function filterStats(range) {
        document.getElementById('customStartDate').classList.add('hidden');
        document.getElementById('customEndDate').classList.add('hidden');
        if (range === 'custom') {
            document.getElementById('customStartDate').classList.remove('hidden');
            document.getElementById('customEndDate').classList.remove('hidden');
            return;
        }
        
        // Sample data
        const stats = {
            totalEmailsSent: 1234567,
            deliveryRate: 98.7,
            failedEmails: 1345,
            failedRate: 1.3,
            bouncedEmails: 250,
            bouncedRate: 0.21,
            openedEmails: 78500,
            openedRate: 6.36,
            clickedEmails: 50200,
            clickedRate: 4.06,
            complaints: 320,
            complaintsRate: 0.026
        };

        // Implement your filtering logic here
        console.log('Filtering stats by:', range);

        // Update stats data based on the filter
        document.querySelector('.totalEmailsSent').textContent = stats.totalEmailsSent;
        document.querySelector('.deliveryRate').textContent = `${stats.deliveryRate}%`;
        document.querySelector('.failedEmails').textContent = stats.failedEmails;
        document.querySelector('.bouncedEmails').textContent = stats.bouncedEmails;
        document.querySelector('.openedEmails').textContent = stats.openedEmails;
        document.querySelector('.clickedEmails').textContent = stats.clickedEmails;
        document.querySelector('.complaints').textContent = stats.complaints;
    }

    // Function to filter logs by different time ranges
    function filterLogs(range) {
        document.getElementById('logsCustomStartDate').classList.add('hidden');
        document.getElementById('logsCustomEndDate').classList.add('hidden');
        if (range === 'custom') {
            document.getElementById('logsCustomStartDate').classList.remove('hidden');
            document.getElementById('logsCustomEndDate').classList.remove('hidden');
            return;
        }
        
        // Implement your filtering logic here
        console.log('Filtering logs by:', range);
    }

    // Add Domain function
    function showDomainModal() {
        document.getElementById('domainModal').classList.remove('hidden');
    }

    function closeDomainModal() {
        document.getElementById('domainModal').classList.add('hidden');
        document.getElementById('dnsRecords').classList.add('hidden');
    }

    function simulateAddDomain() {
        // Show DNS records guidance after domain added
        document.getElementById('dnsRecords').classList.remove('hidden');
    }

    // Domain verification function
    function verifyDomain() {
        // Simulate verification logic
        const isVerified = true; // Replace with real verification logic
        const messageElement = document.getElementById('verificationMessage');
        if (isVerified) {
            messageElement.textContent = "Your domain has been verified successfully!";
        } else {
            messageElement.textContent = "Your domain is not verified yet. Please add the DNS records and try again.";
        }
        alert(isVerified ? "Domain verified successfully!" : "Verification failed. Please ensure the DNS records are correct.");
    }

    // Add Email Sender function
    function showEmailSenderModal() {
        document.getElementById('emailSenderModal').classList.remove('hidden');
    }

    function closeEmailSenderModal() {
        document.getElementById('emailSenderModal').classList.add('hidden');
        document.getElementById('emailVerification').classList.add('hidden');
    }

    function simulateAddEmailSender() {
        // Show email verification guidance after email sender added
        document.getElementById('emailVerification').classList.remove('hidden');
        alert('Verification email sent to the provided address.');
    }

    // Function to regenerate password
    function regeneratePassword() {
        alert('Password regenerated successfully');
    }

    // Function to regenerate API key
    function regenerateApiKey() {
        alert('API Key generated successfully');
    }

    // Function to show API examples
    function showApiExample(exampleId) {
        document.querySelectorAll('.api-example').forEach(example => example.classList.add('hidden'));
        document.getElementById(exampleId).classList.remove('hidden');
    }

    // Function to show integration tabs
    function showIntegrationTab(tabId) {
        document.querySelectorAll('.integration-tab-content').forEach(tab => tab.classList.add('hidden'));
        document.getElementById(tabId).classList.remove('hidden');
    }

    // Function to filter search results
    function filterSearch() {
        const query = document.getElementById('searchInput').value.toLowerCase();
        
        // Implement your filtering logic for domains and emails here
        console.log('Searching for:', query);
    }

    // Check for saved dark mode preference
    if (localStorage.getItem('darkMode') === 'true') {
        document.body.classList.add('dark');
    }

    // Email Activity Chart
    const emailActivityCtx = document.getElementById('emailActivityChart').getContext('2d');
    new Chart(emailActivityCtx, {
        type: 'line',
        data: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [{
                label: 'Emails Sent',
                data: [1200, 1900, 3000, 5000, 2000, 3000, 4000],
                borderColor: 'rgb(59, 130, 246)',
                tension: 0.2
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true }
            }
        }
    });

    // Delivery Status Chart
    const deliveryStatusCtx = document.getElementById('deliveryStatusChart').getContext('2d');
    new Chart(deliveryStatusCtx, {
        type: 'doughnut',
        data: {
            labels: ['Delivered', 'Bounced', 'Spam', 'Opened', 'Clicked', 'Complaints', 'Failed'],
            datasets: [{
                data: [70, 10, 5, 25, 15, 3, 7],
                backgroundColor: ['#10B981', '#EF4444', '#F59E0B', '#FBBF24', '#38BDF8', '#A78BFA', '#F43F5E']
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { position: 'bottom' }
            }
        }
    });

    window.addEventListener('click', function(e) {
        if (e.target === document.getElementById('domainModal')) {
            closeDomainModal();
        }
        if (e.target === document.getElementById('emailSenderModal')) {
            closeEmailSenderModal();
        }
    });
</script>
</body>
</html>
